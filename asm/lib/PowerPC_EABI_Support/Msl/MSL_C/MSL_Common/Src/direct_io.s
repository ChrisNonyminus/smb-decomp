.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x8010F860

.global fwrite
fwrite:
/* 801044E0 00100400  7C 08 02 A6 */	mflr r0
/* 801044E4 00100404  90 01 00 04 */	stw r0, 4(r1)
/* 801044E8 00100408  94 21 FF B8 */	stwu r1, -0x48(r1)
/* 801044EC 0010040C  BF 21 00 2C */	stmw r25, 0x2c(r1)
/* 801044F0 00100410  3B 44 00 00 */	addi r26, r4, 0
/* 801044F4 00100414  3B 66 00 00 */	addi r27, r6, 0
/* 801044F8 00100418  3B 83 00 00 */	addi r28, r3, 0
/* 801044FC 0010041C  3B 25 00 00 */	addi r25, r5, 0
/* 80104500 00100420  38 7B 00 00 */	addi r3, r27, 0
/* 80104504 00100424  38 80 00 00 */	li r4, 0
/* 80104508 00100428  48 00 27 F9 */	bl fwide
/* 8010450C 0010042C  2C 03 00 00 */	cmpwi r3, 0
/* 80104510 00100430  40 82 00 10 */	bne lbl_80104520
/* 80104514 00100434  38 7B 00 00 */	addi r3, r27, 0
/* 80104518 00100438  38 80 FF FF */	li r4, -1
/* 8010451C 0010043C  48 00 27 E5 */	bl fwide
lbl_80104520:
/* 80104520 00100440  7C 1A C9 D7 */	mullw. r0, r26, r25
/* 80104524 00100444  7C 1D 03 78 */	mr r29, r0
/* 80104528 00100448  41 82 00 1C */	beq lbl_80104544
/* 8010452C 0010044C  88 1B 00 0A */	lbz r0, 0xa(r27)
/* 80104530 00100450  28 00 00 00 */	cmplwi r0, 0
/* 80104534 00100454  40 82 00 10 */	bne lbl_80104544
/* 80104538 00100458  A0 1B 00 04 */	lhz r0, 4(r27)
/* 8010453C 0010045C  54 00 D7 7F */	rlwinm. r0, r0, 0x1a, 0x1d, 0x1f
/* 80104540 00100460  40 82 00 0C */	bne lbl_8010454C
lbl_80104544:
/* 80104544 00100464  38 60 00 00 */	li r3, 0
/* 80104548 00100468  48 00 02 60 */	b lbl_801047A8
lbl_8010454C:
/* 8010454C 0010046C  2C 00 00 02 */	cmpwi r0, 2
/* 80104550 00100470  40 82 00 08 */	bne lbl_80104558
/* 80104554 00100474  48 00 06 CD */	bl __stdio_atexit
lbl_80104558:
/* 80104558 00100478  88 1B 00 05 */	lbz r0, 5(r27)
/* 8010455C 0010047C  3B E0 00 01 */	li r31, 1
/* 80104560 00100480  38 7F 00 00 */	addi r3, r31, 0
/* 80104564 00100484  54 00 EF FF */	rlwinm. r0, r0, 0x1d, 0x1f, 0x1f
/* 80104568 00100488  38 9F 00 00 */	addi r4, r31, 0
/* 8010456C 0010048C  41 82 00 18 */	beq lbl_80104584
/* 80104570 00100490  A0 1B 00 04 */	lhz r0, 4(r27)
/* 80104574 00100494  54 00 D7 7E */	rlwinm r0, r0, 0x1a, 0x1d, 0x1f
/* 80104578 00100498  2C 00 00 03 */	cmpwi r0, 3
/* 8010457C 0010049C  41 82 00 08 */	beq lbl_80104584
/* 80104580 001004A0  38 80 00 00 */	li r4, 0
lbl_80104584:
/* 80104584 001004A4  2C 04 00 00 */	cmpwi r4, 0
/* 80104588 001004A8  40 82 00 18 */	bne lbl_801045A0
/* 8010458C 001004AC  88 1B 00 04 */	lbz r0, 4(r27)
/* 80104590 001004B0  54 00 FF BE */	rlwinm r0, r0, 0x1f, 0x1e, 0x1f
/* 80104594 001004B4  28 00 00 02 */	cmplwi r0, 2
/* 80104598 001004B8  41 82 00 08 */	beq lbl_801045A0
/* 8010459C 001004BC  38 60 00 00 */	li r3, 0
lbl_801045A0:
/* 801045A0 001004C0  2C 03 00 00 */	cmpwi r3, 0
/* 801045A4 001004C4  40 82 00 18 */	bne lbl_801045BC
/* 801045A8 001004C8  88 1B 00 04 */	lbz r0, 4(r27)
/* 801045AC 001004CC  54 00 FF BE */	rlwinm r0, r0, 0x1f, 0x1e, 0x1f
/* 801045B0 001004D0  28 00 00 01 */	cmplwi r0, 1
/* 801045B4 001004D4  41 82 00 08 */	beq lbl_801045BC
/* 801045B8 001004D8  3B E0 00 00 */	li r31, 0
lbl_801045BC:
/* 801045BC 001004DC  88 7B 00 08 */	lbz r3, 8(r27)
/* 801045C0 001004E0  54 60 DF 7F */	rlwinm. r0, r3, 0x1b, 0x1d, 0x1f
/* 801045C4 001004E4  40 82 00 24 */	bne lbl_801045E8
/* 801045C8 001004E8  88 1B 00 04 */	lbz r0, 4(r27)
/* 801045CC 001004EC  54 00 EF BD */	rlwinm. r0, r0, 0x1d, 0x1e, 0x1e
/* 801045D0 001004F0  41 82 00 18 */	beq lbl_801045E8
/* 801045D4 001004F4  38 00 00 01 */	li r0, 1
/* 801045D8 001004F8  50 03 2E 34 */	rlwimi r3, r0, 5, 0x18, 0x1a
/* 801045DC 001004FC  98 7B 00 08 */	stb r3, 8(r27)
/* 801045E0 00100500  7F 63 DB 78 */	mr r3, r27
/* 801045E4 00100504  4B FF FB F1 */	bl __prep_buffer
lbl_801045E8:
/* 801045E8 00100508  88 1B 00 08 */	lbz r0, 8(r27)
/* 801045EC 0010050C  54 00 DF 7E */	rlwinm r0, r0, 0x1b, 0x1d, 0x1f
/* 801045F0 00100510  28 00 00 01 */	cmplwi r0, 1
/* 801045F4 00100514  41 82 00 1C */	beq lbl_80104610
/* 801045F8 00100518  38 00 00 01 */	li r0, 1
/* 801045FC 0010051C  98 1B 00 0A */	stb r0, 0xa(r27)
/* 80104600 00100520  38 00 00 00 */	li r0, 0
/* 80104604 00100524  38 60 00 00 */	li r3, 0
/* 80104608 00100528  90 1B 00 24 */	stw r0, 0x24(r27)
/* 8010460C 0010052C  48 00 01 9C */	b lbl_801047A8
lbl_80104610:
/* 80104610 00100530  28 1D 00 00 */	cmplwi r29, 0
/* 80104614 00100534  3B DC 00 00 */	addi r30, r28, 0
/* 80104618 00100538  3B 80 00 00 */	li r28, 0
/* 8010461C 0010053C  41 82 00 FC */	beq lbl_80104718
/* 80104620 00100540  80 9B 00 20 */	lwz r4, 0x20(r27)
/* 80104624 00100544  80 7B 00 18 */	lwz r3, 0x18(r27)
/* 80104628 00100548  7C 04 18 40 */	cmplw r4, r3
/* 8010462C 0010054C  40 82 00 0C */	bne lbl_80104638
/* 80104630 00100550  2C 1F 00 00 */	cmpwi r31, 0
/* 80104634 00100554  41 82 00 E4 */	beq lbl_80104718
lbl_80104638:
/* 80104638 00100558  80 1B 00 1C */	lwz r0, 0x1c(r27)
/* 8010463C 0010055C  7C 63 20 50 */	subf r3, r3, r4
/* 80104640 00100560  7C 03 00 50 */	subf r0, r3, r0
/* 80104644 00100564  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_80104648:
/* 80104648 00100568  80 1B 00 24 */	lwz r0, 0x24(r27)
/* 8010464C 0010056C  90 01 00 20 */	stw r0, 0x20(r1)
/* 80104650 00100570  80 01 00 20 */	lwz r0, 0x20(r1)
/* 80104654 00100574  7C 00 E8 40 */	cmplw r0, r29
/* 80104658 00100578  40 81 00 08 */	ble lbl_80104660
/* 8010465C 0010057C  93 A1 00 20 */	stw r29, 0x20(r1)
lbl_80104660:
/* 80104660 00100580  80 A1 00 20 */	lwz r5, 0x20(r1)
/* 80104664 00100584  28 05 00 00 */	cmplwi r5, 0
/* 80104668 00100588  41 82 00 3C */	beq lbl_801046A4
/* 8010466C 0010058C  80 7B 00 20 */	lwz r3, 0x20(r27)
/* 80104670 00100590  7F C4 F3 78 */	mr r4, r30
/* 80104674 00100594  4B EF ED A1 */	bl memcpy
/* 80104678 00100598  80 61 00 20 */	lwz r3, 0x20(r1)
/* 8010467C 0010059C  80 1B 00 20 */	lwz r0, 0x20(r27)
/* 80104680 001005A0  7F DE 1A 14 */	add r30, r30, r3
/* 80104684 001005A4  7C 00 1A 14 */	add r0, r0, r3
/* 80104688 001005A8  90 1B 00 20 */	stw r0, 0x20(r27)
/* 8010468C 001005AC  7F 9C 1A 14 */	add r28, r28, r3
/* 80104690 001005B0  7F A3 E8 50 */	subf r29, r3, r29
/* 80104694 001005B4  80 61 00 20 */	lwz r3, 0x20(r1)
/* 80104698 001005B8  80 1B 00 24 */	lwz r0, 0x24(r27)
/* 8010469C 001005BC  7C 03 00 50 */	subf r0, r3, r0
/* 801046A0 001005C0  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_801046A4:
/* 801046A4 001005C4  80 7B 00 24 */	lwz r3, 0x24(r27)
/* 801046A8 001005C8  28 03 00 00 */	cmplwi r3, 0
/* 801046AC 001005CC  40 82 00 1C */	bne lbl_801046C8
/* 801046B0 001005D0  A0 1B 00 04 */	lhz r0, 4(r27)
/* 801046B4 001005D4  54 00 D7 7E */	rlwinm r0, r0, 0x1a, 0x1d, 0x1f
/* 801046B8 001005D8  2C 00 00 03 */	cmpwi r0, 3
/* 801046BC 001005DC  40 82 00 0C */	bne lbl_801046C8
/* 801046C0 001005E0  7F 9C EA 14 */	add r28, r28, r29
/* 801046C4 001005E4  48 00 00 54 */	b lbl_80104718
lbl_801046C8:
/* 801046C8 001005E8  28 03 00 00 */	cmplwi r3, 0
/* 801046CC 001005EC  41 82 00 10 */	beq lbl_801046DC
/* 801046D0 001005F0  88 1B 00 04 */	lbz r0, 4(r27)
/* 801046D4 001005F4  54 00 FF BF */	rlwinm. r0, r0, 0x1f, 0x1e, 0x1f
/* 801046D8 001005F8  40 82 00 30 */	bne lbl_80104708
lbl_801046DC:
/* 801046DC 001005FC  38 7B 00 00 */	addi r3, r27, 0
/* 801046E0 00100600  38 80 00 00 */	li r4, 0
/* 801046E4 00100604  4B FF FA 25 */	bl __flush_buffer
/* 801046E8 00100608  2C 03 00 00 */	cmpwi r3, 0
/* 801046EC 0010060C  41 82 00 1C */	beq lbl_80104708
/* 801046F0 00100610  38 00 00 01 */	li r0, 1
/* 801046F4 00100614  98 1B 00 0A */	stb r0, 0xa(r27)
/* 801046F8 00100618  38 00 00 00 */	li r0, 0
/* 801046FC 0010061C  3B A0 00 00 */	li r29, 0
/* 80104700 00100620  90 1B 00 24 */	stw r0, 0x24(r27)
/* 80104704 00100624  48 00 00 14 */	b lbl_80104718
lbl_80104708:
/* 80104708 00100628  28 1D 00 00 */	cmplwi r29, 0
/* 8010470C 0010062C  41 82 00 0C */	beq lbl_80104718
/* 80104710 00100630  2C 1F 00 00 */	cmpwi r31, 0
/* 80104714 00100634  40 82 FF 34 */	bne lbl_80104648
lbl_80104718:
/* 80104718 00100638  28 1D 00 00 */	cmplwi r29, 0
/* 8010471C 0010063C  41 82 00 68 */	beq lbl_80104784
/* 80104720 00100640  2C 1F 00 00 */	cmpwi r31, 0
/* 80104724 00100644  40 82 00 60 */	bne lbl_80104784
/* 80104728 00100648  83 FB 00 18 */	lwz r31, 0x18(r27)
/* 8010472C 0010064C  7C 1E EA 14 */	add r0, r30, r29
/* 80104730 00100650  83 3B 00 1C */	lwz r25, 0x1c(r27)
/* 80104734 00100654  38 7B 00 00 */	addi r3, r27, 0
/* 80104738 00100658  38 81 00 20 */	addi r4, r1, 0x20
/* 8010473C 0010065C  93 DB 00 18 */	stw r30, 0x18(r27)
/* 80104740 00100660  93 BB 00 1C */	stw r29, 0x1c(r27)
/* 80104744 00100664  90 1B 00 20 */	stw r0, 0x20(r27)
/* 80104748 00100668  4B FF F9 C1 */	bl __flush_buffer
/* 8010474C 0010066C  2C 03 00 00 */	cmpwi r3, 0
/* 80104750 00100670  41 82 00 14 */	beq lbl_80104764
/* 80104754 00100674  38 00 00 01 */	li r0, 1
/* 80104758 00100678  98 1B 00 0A */	stb r0, 0xa(r27)
/* 8010475C 0010067C  38 00 00 00 */	li r0, 0
/* 80104760 00100680  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_80104764:
/* 80104764 00100684  80 01 00 20 */	lwz r0, 0x20(r1)
/* 80104768 00100688  7F 63 DB 78 */	mr r3, r27
/* 8010476C 0010068C  93 FB 00 18 */	stw r31, 0x18(r27)
/* 80104770 00100690  7F 9C 02 14 */	add r28, r28, r0
/* 80104774 00100694  93 3B 00 1C */	stw r25, 0x1c(r27)
/* 80104778 00100698  4B FF FA 5D */	bl __prep_buffer
/* 8010477C 0010069C  38 00 00 00 */	li r0, 0
/* 80104780 001006A0  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_80104784:
/* 80104784 001006A4  88 1B 00 04 */	lbz r0, 4(r27)
/* 80104788 001006A8  54 00 FF BE */	rlwinm r0, r0, 0x1f, 0x1e, 0x1f
/* 8010478C 001006AC  28 00 00 02 */	cmplwi r0, 2
/* 80104790 001006B0  41 82 00 0C */	beq lbl_8010479C
/* 80104794 001006B4  38 00 00 00 */	li r0, 0
/* 80104798 001006B8  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_8010479C:
/* 8010479C 001006BC  38 1A FF FF */	addi r0, r26, -1
/* 801047A0 001006C0  7C 1C 02 14 */	add r0, r28, r0
/* 801047A4 001006C4  7C 60 D3 96 */	divwu r3, r0, r26
lbl_801047A8:
/* 801047A8 001006C8  BB 21 00 2C */	lmw r25, 0x2c(r1)
/* 801047AC 001006CC  80 01 00 4C */	lwz r0, 0x4c(r1)
/* 801047B0 001006D0  38 21 00 48 */	addi r1, r1, 0x48
/* 801047B4 001006D4  7C 08 03 A6 */	mtlr r0
/* 801047B8 001006D8  4E 80 00 20 */	blr 
