.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x8010F860

.global TRKDoNotifyStopped
TRKDoNotifyStopped:
/* 8010BFF8 00107F18  7C 08 02 A6 */	mflr r0
/* 8010BFFC 00107F1C  90 01 00 04 */	stw r0, 4(r1)
/* 8010C000 00107F20  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8010C004 00107F24  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8010C008 00107F28  38 81 00 0C */	addi r4, r1, 0xc
/* 8010C00C 00107F2C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8010C010 00107F30  3B C3 00 00 */	addi r30, r3, 0
/* 8010C014 00107F34  38 61 00 08 */	addi r3, r1, 8
/* 8010C018 00107F38  4B FF DE 7D */	bl TRKGetFreeBuffer
/* 8010C01C 00107F3C  7C 7F 1B 79 */	or. r31, r3, r3
/* 8010C020 00107F40  40 82 00 94 */	bne lbl_8010C0B4
/* 8010C024 00107F44  80 A1 00 0C */	lwz r5, 0xc(r1)
/* 8010C028 00107F48  80 65 00 0C */	lwz r3, 0xc(r5)
/* 8010C02C 00107F4C  28 03 08 80 */	cmplwi r3, 0x880
/* 8010C030 00107F50  41 80 00 0C */	blt lbl_8010C03C
/* 8010C034 00107F54  38 80 03 01 */	li r4, 0x301
/* 8010C038 00107F58  48 00 00 24 */	b lbl_8010C05C
lbl_8010C03C:
/* 8010C03C 00107F5C  38 03 00 01 */	addi r0, r3, 1
/* 8010C040 00107F60  7C 65 1A 14 */	add r3, r5, r3
/* 8010C044 00107F64  90 05 00 0C */	stw r0, 0xc(r5)
/* 8010C048 00107F68  38 80 00 00 */	li r4, 0
/* 8010C04C 00107F6C  9B C3 00 10 */	stb r30, 0x10(r3)
/* 8010C050 00107F70  80 65 00 08 */	lwz r3, 8(r5)
/* 8010C054 00107F74  38 03 00 01 */	addi r0, r3, 1
/* 8010C058 00107F78  90 05 00 08 */	stw r0, 8(r5)
lbl_8010C05C:
/* 8010C05C 00107F7C  2C 04 00 00 */	cmpwi r4, 0
/* 8010C060 00107F80  40 82 00 24 */	bne lbl_8010C084
/* 8010C064 00107F84  57 C0 06 3E */	clrlwi r0, r30, 0x18
/* 8010C068 00107F88  28 00 00 90 */	cmplwi r0, 0x90
/* 8010C06C 00107F8C  40 82 00 10 */	bne lbl_8010C07C
/* 8010C070 00107F90  80 61 00 0C */	lwz r3, 0xc(r1)
/* 8010C074 00107F94  48 00 0F 55 */	bl TRKTargetAddStopInfo
/* 8010C078 00107F98  48 00 00 0C */	b lbl_8010C084
lbl_8010C07C:
/* 8010C07C 00107F9C  80 61 00 0C */	lwz r3, 0xc(r1)
/* 8010C080 00107FA0  48 00 0F D9 */	bl TRKTargetAddExceptionInfo
lbl_8010C084:
/* 8010C084 00107FA4  80 61 00 0C */	lwz r3, 0xc(r1)
/* 8010C088 00107FA8  38 81 00 10 */	addi r4, r1, 0x10
/* 8010C08C 00107FAC  38 A0 00 02 */	li r5, 2
/* 8010C090 00107FB0  38 C0 00 03 */	li r6, 3
/* 8010C094 00107FB4  38 E0 00 01 */	li r7, 1
/* 8010C098 00107FB8  4B FF FD A5 */	bl TRKRequestSend
/* 8010C09C 00107FBC  7C 7F 1B 79 */	or. r31, r3, r3
/* 8010C0A0 00107FC0  40 82 00 0C */	bne lbl_8010C0AC
/* 8010C0A4 00107FC4  80 61 00 10 */	lwz r3, 0x10(r1)
/* 8010C0A8 00107FC8  4B FF DE B5 */	bl TRKReleaseBuffer
lbl_8010C0AC:
/* 8010C0AC 00107FCC  80 61 00 08 */	lwz r3, 8(r1)
/* 8010C0B0 00107FD0  4B FF DE AD */	bl TRKReleaseBuffer
lbl_8010C0B4:
/* 8010C0B4 00107FD4  7F E3 FB 78 */	mr r3, r31
/* 8010C0B8 00107FD8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8010C0BC 00107FDC  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8010C0C0 00107FE0  38 21 00 20 */	addi r1, r1, 0x20
/* 8010C0C4 00107FE4  80 01 00 04 */	lwz r0, 4(r1)
/* 8010C0C8 00107FE8  7C 08 03 A6 */	mtlr r0
/* 8010C0CC 00107FEC  4E 80 00 20 */	blr
