.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x8010F860

.global WriteCallback_3
WriteCallback_3:
/* 800DADC8 000D6CE8  7C 08 02 A6 */	mflr r0
/* 800DADCC 000D6CEC  90 01 00 04 */	stw r0, 4(r1)
/* 800DADD0 000D6CF0  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800DADD4 000D6CF4  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800DADD8 000D6CF8  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800DADDC 000D6CFC  3B C3 00 00 */	addi r30, r3, 0
/* 800DADE0 000D6D00  3C 60 80 2C */	lis r3, __CARDBlock@ha
/* 800DADE4 000D6D04  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800DADE8 000D6D08  1C BE 01 08 */	mulli r5, r30, 0x108
/* 800DADEC 000D6D0C  93 81 00 10 */	stw r28, 0x10(r1)
/* 800DADF0 000D6D10  38 03 7C 60 */	addi r0, r3, __CARDBlock@l
/* 800DADF4 000D6D14  7C 9C 23 79 */	or. r28, r4, r4
/* 800DADF8 000D6D18  7F E0 2A 14 */	add r31, r0, r5
/* 800DADFC 000D6D1C  41 80 00 F0 */	blt lbl_800DAEEC
/* 800DAE00 000D6D20  83 BF 00 C0 */	lwz r29, 0xc0(r31)
/* 800DAE04 000D6D24  80 7D 00 0C */	lwz r3, 0xc(r29)
/* 800DAE08 000D6D28  2C 03 00 00 */	cmpwi r3, 0
/* 800DAE0C 000D6D2C  40 80 00 0C */	bge lbl_800DAE18
/* 800DAE10 000D6D30  3B 80 FF F2 */	li r28, -14
/* 800DAE14 000D6D34  48 00 00 D8 */	b lbl_800DAEEC
lbl_800DAE18:
/* 800DAE18 000D6D38  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 800DAE1C 000D6D3C  7C 00 18 50 */	subf r0, r0, r3
/* 800DAE20 000D6D40  90 1D 00 0C */	stw r0, 0xc(r29)
/* 800DAE24 000D6D44  80 1D 00 0C */	lwz r0, 0xc(r29)
/* 800DAE28 000D6D48  2C 00 00 00 */	cmpwi r0, 0
/* 800DAE2C 000D6D4C  41 81 00 54 */	bgt lbl_800DAE80
/* 800DAE30 000D6D50  7F E3 FB 78 */	mr r3, r31
/* 800DAE34 000D6D54  4B FF CF 6D */	bl __CARDGetDirBlock
/* 800DAE38 000D6D58  80 BD 00 04 */	lwz r5, 4(r29)
/* 800DAE3C 000D6D5C  3C 80 80 00 */	lis r4, 0x800000F8@ha
/* 800DAE40 000D6D60  80 04 00 F8 */	lwz r0, 0x800000F8@l(r4)
/* 800DAE44 000D6D64  54 A4 30 32 */	slwi r4, r5, 6
/* 800DAE48 000D6D68  7F 83 22 14 */	add r28, r3, r4
/* 800DAE4C 000D6D6C  54 1D F0 BE */	srwi r29, r0, 2
/* 800DAE50 000D6D70  4B FE EB 2D */	bl OSGetTime
/* 800DAE54 000D6D74  38 DD 00 00 */	addi r6, r29, 0
/* 800DAE58 000D6D78  38 A0 00 00 */	li r5, 0
/* 800DAE5C 000D6D7C  48 02 88 59 */	bl __div2i
/* 800DAE60 000D6D80  90 9C 00 28 */	stw r4, 0x28(r28)
/* 800DAE64 000D6D84  38 00 00 00 */	li r0, 0
/* 800DAE68 000D6D88  38 7E 00 00 */	addi r3, r30, 0
/* 800DAE6C 000D6D8C  80 9F 00 D0 */	lwz r4, 0xd0(r31)
/* 800DAE70 000D6D90  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 800DAE74 000D6D94  4B FF D0 CD */	bl __CARDUpdateDir
/* 800DAE78 000D6D98  7C 7C 1B 78 */	mr r28, r3
/* 800DAE7C 000D6D9C  48 00 00 68 */	b lbl_800DAEE4
lbl_800DAE80:
/* 800DAE80 000D6DA0  7F E3 FB 78 */	mr r3, r31
/* 800DAE84 000D6DA4  4B FF CB 19 */	bl __CARDGetFatBlock
/* 800DAE88 000D6DA8  80 9D 00 08 */	lwz r4, 8(r29)
/* 800DAE8C 000D6DAC  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 800DAE90 000D6DB0  7C 04 02 14 */	add r0, r4, r0
/* 800DAE94 000D6DB4  90 1D 00 08 */	stw r0, 8(r29)
/* 800DAE98 000D6DB8  A0 1D 00 10 */	lhz r0, 0x10(r29)
/* 800DAE9C 000D6DBC  54 00 08 3C */	slwi r0, r0, 1
/* 800DAEA0 000D6DC0  7C 03 02 2E */	lhzx r0, r3, r0
/* 800DAEA4 000D6DC4  B0 1D 00 10 */	sth r0, 0x10(r29)
/* 800DAEA8 000D6DC8  A0 9D 00 10 */	lhz r4, 0x10(r29)
/* 800DAEAC 000D6DCC  28 04 00 05 */	cmplwi r4, 5
/* 800DAEB0 000D6DD0  41 80 00 10 */	blt lbl_800DAEC0
/* 800DAEB4 000D6DD4  A0 1F 00 10 */	lhz r0, 0x10(r31)
/* 800DAEB8 000D6DD8  7C 04 00 40 */	cmplw r4, r0
/* 800DAEBC 000D6DDC  41 80 00 0C */	blt lbl_800DAEC8
lbl_800DAEC0:
/* 800DAEC0 000D6DE0  3B 80 FF FA */	li r28, -6
/* 800DAEC4 000D6DE4  48 00 00 28 */	b lbl_800DAEEC
lbl_800DAEC8:
/* 800DAEC8 000D6DE8  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 800DAECC 000D6DEC  3C 60 80 0E */	lis r3, EraseCallback_3@ha
/* 800DAED0 000D6DF0  38 A3 AF 38 */	addi r5, r3, EraseCallback_3@l
/* 800DAED4 000D6DF4  7C 80 21 D6 */	mullw r4, r0, r4
/* 800DAED8 000D6DF8  38 7E 00 00 */	addi r3, r30, 0
/* 800DAEDC 000D6DFC  4B FF B1 6D */	bl __CARDEraseSector
/* 800DAEE0 000D6E00  7C 7C 1B 78 */	mr r28, r3
lbl_800DAEE4:
/* 800DAEE4 000D6E04  2C 1C 00 00 */	cmpwi r28, 0
/* 800DAEE8 000D6E08  40 80 00 30 */	bge lbl_800DAF18
lbl_800DAEEC:
/* 800DAEEC 000D6E0C  83 BF 00 D0 */	lwz r29, 0xd0(r31)
/* 800DAEF0 000D6E10  38 00 00 00 */	li r0, 0
/* 800DAEF4 000D6E14  38 7F 00 00 */	addi r3, r31, 0
/* 800DAEF8 000D6E18  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 800DAEFC 000D6E1C  7F 84 E3 78 */	mr r4, r28
/* 800DAF00 000D6E20  4B FF B3 81 */	bl __CARDPutControlBlock
/* 800DAF04 000D6E24  39 9D 00 00 */	addi r12, r29, 0
/* 800DAF08 000D6E28  7D 88 03 A6 */	mtlr r12
/* 800DAF0C 000D6E2C  38 7E 00 00 */	addi r3, r30, 0
/* 800DAF10 000D6E30  38 9C 00 00 */	addi r4, r28, 0
/* 800DAF14 000D6E34  4E 80 00 21 */	blrl
lbl_800DAF18:
/* 800DAF18 000D6E38  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800DAF1C 000D6E3C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800DAF20 000D6E40  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800DAF24 000D6E44  7C 08 03 A6 */	mtlr r0
/* 800DAF28 000D6E48  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800DAF2C 000D6E4C  83 81 00 10 */	lwz r28, 0x10(r1)
/* 800DAF30 000D6E50  38 21 00 20 */	addi r1, r1, 0x20
/* 800DAF34 000D6E54  4E 80 00 20 */	blr

.global EraseCallback_3
EraseCallback_3:
/* 800DAF38 000D6E58  7C 08 02 A6 */	mflr r0
/* 800DAF3C 000D6E5C  90 01 00 04 */	stw r0, 4(r1)
/* 800DAF40 000D6E60  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800DAF44 000D6E64  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800DAF48 000D6E68  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800DAF4C 000D6E6C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800DAF50 000D6E70  7C 9D 23 79 */	or. r29, r4, r4
/* 800DAF54 000D6E74  93 81 00 10 */	stw r28, 0x10(r1)
/* 800DAF58 000D6E78  3B 83 00 00 */	addi r28, r3, 0
/* 800DAF5C 000D6E7C  1C BC 01 08 */	mulli r5, r28, 0x108
/* 800DAF60 000D6E80  3C 60 80 2C */	lis r3, __CARDBlock@ha
/* 800DAF64 000D6E84  38 03 7C 60 */	addi r0, r3, __CARDBlock@l
/* 800DAF68 000D6E88  7F E0 2A 14 */	add r31, r0, r5
/* 800DAF6C 000D6E8C  41 80 00 30 */	blt lbl_800DAF9C
/* 800DAF70 000D6E90  80 9F 00 C0 */	lwz r4, 0xc0(r31)
/* 800DAF74 000D6E94  3C 60 80 0E */	lis r3, WriteCallback_3@ha
/* 800DAF78 000D6E98  38 E3 AD C8 */	addi r7, r3, WriteCallback_3@l
/* 800DAF7C 000D6E9C  80 BF 00 0C */	lwz r5, 0xc(r31)
/* 800DAF80 000D6EA0  A0 04 00 10 */	lhz r0, 0x10(r4)
/* 800DAF84 000D6EA4  80 DF 00 B4 */	lwz r6, 0xb4(r31)
/* 800DAF88 000D6EA8  38 7C 00 00 */	addi r3, r28, 0
/* 800DAF8C 000D6EAC  7C 85 01 D6 */	mullw r4, r5, r0
/* 800DAF90 000D6EB0  4B FF C9 A9 */	bl __CARDWrite
/* 800DAF94 000D6EB4  7C 7D 1B 79 */	or. r29, r3, r3
/* 800DAF98 000D6EB8  40 80 00 30 */	bge lbl_800DAFC8
lbl_800DAF9C:
/* 800DAF9C 000D6EBC  83 DF 00 D0 */	lwz r30, 0xd0(r31)
/* 800DAFA0 000D6EC0  38 00 00 00 */	li r0, 0
/* 800DAFA4 000D6EC4  38 7F 00 00 */	addi r3, r31, 0
/* 800DAFA8 000D6EC8  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 800DAFAC 000D6ECC  7F A4 EB 78 */	mr r4, r29
/* 800DAFB0 000D6ED0  4B FF B2 D1 */	bl __CARDPutControlBlock
/* 800DAFB4 000D6ED4  39 9E 00 00 */	addi r12, r30, 0
/* 800DAFB8 000D6ED8  7D 88 03 A6 */	mtlr r12
/* 800DAFBC 000D6EDC  38 7C 00 00 */	addi r3, r28, 0
/* 800DAFC0 000D6EE0  38 9D 00 00 */	addi r4, r29, 0
/* 800DAFC4 000D6EE4  4E 80 00 21 */	blrl
lbl_800DAFC8:
/* 800DAFC8 000D6EE8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800DAFCC 000D6EEC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800DAFD0 000D6EF0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800DAFD4 000D6EF4  7C 08 03 A6 */	mtlr r0
/* 800DAFD8 000D6EF8  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800DAFDC 000D6EFC  83 81 00 10 */	lwz r28, 0x10(r1)
/* 800DAFE0 000D6F00  38 21 00 20 */	addi r1, r1, 0x20
/* 800DAFE4 000D6F04  4E 80 00 20 */	blr

.global CARDWriteAsync
CARDWriteAsync:
/* 800DAFE8 000D6F08  7C 08 02 A6 */	mflr r0
/* 800DAFEC 000D6F0C  90 01 00 04 */	stw r0, 4(r1)
/* 800DAFF0 000D6F10  94 21 FF C8 */	stwu r1, -0x38(r1)
/* 800DAFF4 000D6F14  BF 61 00 24 */	stmw r27, 0x24(r1)
/* 800DAFF8 000D6F18  3B 86 00 00 */	addi r28, r6, 0
/* 800DAFFC 000D6F1C  3B 65 00 00 */	addi r27, r5, 0
/* 800DB000 000D6F20  3B E4 00 00 */	addi r31, r4, 0
/* 800DB004 000D6F24  3B C3 00 00 */	addi r30, r3, 0
/* 800DB008 000D6F28  3B A7 00 00 */	addi r29, r7, 0
/* 800DB00C 000D6F2C  38 9B 00 00 */	addi r4, r27, 0
/* 800DB010 000D6F30  38 BC 00 00 */	addi r5, r28, 0
/* 800DB014 000D6F34  38 C1 00 1C */	addi r6, r1, 0x1c
/* 800DB018 000D6F38  4B FF F8 F9 */	bl __CARDSeek
/* 800DB01C 000D6F3C  2C 03 00 00 */	cmpwi r3, 0
/* 800DB020 000D6F40  40 80 00 08 */	bge lbl_800DB028
/* 800DB024 000D6F44  48 00 00 C0 */	b lbl_800DB0E4
lbl_800DB028:
/* 800DB028 000D6F48  80 61 00 1C */	lwz r3, 0x1c(r1)
/* 800DB02C 000D6F4C  80 83 00 0C */	lwz r4, 0xc(r3)
/* 800DB030 000D6F50  38 84 FF FF */	addi r4, r4, -1
/* 800DB034 000D6F54  7F 80 20 39 */	and. r0, r28, r4
/* 800DB038 000D6F58  40 82 00 0C */	bne lbl_800DB044
/* 800DB03C 000D6F5C  7F 60 20 39 */	and. r0, r27, r4
/* 800DB040 000D6F60  41 82 00 10 */	beq lbl_800DB050
lbl_800DB044:
/* 800DB044 000D6F64  38 80 FF 80 */	li r4, -128
/* 800DB048 000D6F68  4B FF B2 39 */	bl __CARDPutControlBlock
/* 800DB04C 000D6F6C  48 00 00 98 */	b lbl_800DB0E4
lbl_800DB050:
/* 800DB050 000D6F70  4B FF CD 51 */	bl __CARDGetDirBlock
/* 800DB054 000D6F74  80 1E 00 04 */	lwz r0, 4(r30)
/* 800DB058 000D6F78  54 00 30 32 */	slwi r0, r0, 6
/* 800DB05C 000D6F7C  7C 63 02 14 */	add r3, r3, r0
/* 800DB060 000D6F80  4B FF F0 21 */	bl __CARDAccess
/* 800DB064 000D6F84  7C 64 1B 79 */	or. r4, r3, r3
/* 800DB068 000D6F88  40 80 00 10 */	bge lbl_800DB078
/* 800DB06C 000D6F8C  80 61 00 1C */	lwz r3, 0x1c(r1)
/* 800DB070 000D6F90  4B FF B2 11 */	bl __CARDPutControlBlock
/* 800DB074 000D6F94  48 00 00 70 */	b lbl_800DB0E4
lbl_800DB078:
/* 800DB078 000D6F98  38 7F 00 00 */	addi r3, r31, 0
/* 800DB07C 000D6F9C  38 9B 00 00 */	addi r4, r27, 0
/* 800DB080 000D6FA0  4B FE 7F 15 */	bl DCStoreRange
/* 800DB084 000D6FA4  28 1D 00 00 */	cmplwi r29, 0
/* 800DB088 000D6FA8  41 82 00 0C */	beq lbl_800DB094
/* 800DB08C 000D6FAC  7F A0 EB 78 */	mr r0, r29
/* 800DB090 000D6FB0  48 00 00 0C */	b lbl_800DB09C
lbl_800DB094:
/* 800DB094 000D6FB4  3C 60 80 0D */	lis r3, __CARDDefaultApiCallback@ha
/* 800DB098 000D6FB8  38 03 51 C0 */	addi r0, r3, __CARDDefaultApiCallback@l
lbl_800DB09C:
/* 800DB09C 000D6FBC  80 81 00 1C */	lwz r4, 0x1c(r1)
/* 800DB0A0 000D6FC0  3C 60 80 0E */	lis r3, EraseCallback_3@ha
/* 800DB0A4 000D6FC4  38 A3 AF 38 */	addi r5, r3, EraseCallback_3@l
/* 800DB0A8 000D6FC8  90 04 00 D0 */	stw r0, 0xd0(r4)
/* 800DB0AC 000D6FCC  80 61 00 1C */	lwz r3, 0x1c(r1)
/* 800DB0B0 000D6FD0  93 E3 00 B4 */	stw r31, 0xb4(r3)
/* 800DB0B4 000D6FD4  80 61 00 1C */	lwz r3, 0x1c(r1)
/* 800DB0B8 000D6FD8  A0 1E 00 10 */	lhz r0, 0x10(r30)
/* 800DB0BC 000D6FDC  80 83 00 0C */	lwz r4, 0xc(r3)
/* 800DB0C0 000D6FE0  80 7E 00 00 */	lwz r3, 0(r30)
/* 800DB0C4 000D6FE4  7C 84 01 D6 */	mullw r4, r4, r0
/* 800DB0C8 000D6FE8  4B FF AF 81 */	bl __CARDEraseSector
/* 800DB0CC 000D6FEC  7C 7E 1B 79 */	or. r30, r3, r3
/* 800DB0D0 000D6FF0  40 80 00 10 */	bge lbl_800DB0E0
/* 800DB0D4 000D6FF4  80 61 00 1C */	lwz r3, 0x1c(r1)
/* 800DB0D8 000D6FF8  7F C4 F3 78 */	mr r4, r30
/* 800DB0DC 000D6FFC  4B FF B1 A5 */	bl __CARDPutControlBlock
lbl_800DB0E0:
/* 800DB0E0 000D7000  7F C3 F3 78 */	mr r3, r30
lbl_800DB0E4:
/* 800DB0E4 000D7004  BB 61 00 24 */	lmw r27, 0x24(r1)
/* 800DB0E8 000D7008  80 01 00 3C */	lwz r0, 0x3c(r1)
/* 800DB0EC 000D700C  38 21 00 38 */	addi r1, r1, 0x38
/* 800DB0F0 000D7010  7C 08 03 A6 */	mtlr r0
/* 800DB0F4 000D7014  4E 80 00 20 */	blr
