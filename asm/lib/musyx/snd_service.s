.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x8010F860

.global sndRand
sndRand:
/* 800FF3C0 000FB2E0  3C 60 A8 35 */	lis r3, 0xA8351D63@ha
/* 800FF3C4 000FB2E4  80 8D 98 98 */	lwz r4, last_rnd@sda21(r13)
/* 800FF3C8 000FB2E8  38 03 1D 63 */	addi r0, r3, 0xA8351D63@l
/* 800FF3CC 000FB2EC  7C 04 01 D6 */	mullw r0, r4, r0
/* 800FF3D0 000FB2F0  90 0D 98 98 */	stw r0, last_rnd@sda21(r13)
/* 800FF3D4 000FB2F4  80 0D 98 98 */	lwz r0, last_rnd@sda21(r13)
/* 800FF3D8 000FB2F8  54 03 D4 3E */	rlwinm r3, r0, 0x1a, 0x10, 0x1f
/* 800FF3DC 000FB2FC  4E 80 00 20 */	blr

.global sndSin
sndSin:
/* 800FF3E0 000FB300  54 60 05 3E */	clrlwi r0, r3, 0x14
/* 800FF3E4 000FB304  28 00 04 00 */	cmplwi r0, 0x400
/* 800FF3E8 000FB308  3C 60 80 1F */	lis r3, lbl_801EA600@ha
/* 800FF3EC 000FB30C  38 63 A6 00 */	addi r3, r3, lbl_801EA600@l
/* 800FF3F0 000FB310  40 80 00 10 */	bge lbl_800FF400
/* 800FF3F4 000FB314  54 00 08 3C */	slwi r0, r0, 1
/* 800FF3F8 000FB318  7C 63 02 AE */	lhax r3, r3, r0
/* 800FF3FC 000FB31C  4E 80 00 20 */	blr
lbl_800FF400:
/* 800FF400 000FB320  28 00 08 00 */	cmplwi r0, 0x800
/* 800FF404 000FB324  40 80 00 18 */	bge lbl_800FF41C
/* 800FF408 000FB328  54 00 05 BE */	clrlwi r0, r0, 0x16
/* 800FF40C 000FB32C  20 00 03 FF */	subfic r0, r0, 0x3ff
/* 800FF410 000FB330  54 00 08 3C */	slwi r0, r0, 1
/* 800FF414 000FB334  7C 63 02 AE */	lhax r3, r3, r0
/* 800FF418 000FB338  4E 80 00 20 */	blr
lbl_800FF41C:
/* 800FF41C 000FB33C  28 00 0C 00 */	cmplwi r0, 0xc00
/* 800FF420 000FB340  40 80 00 14 */	bge lbl_800FF434
/* 800FF424 000FB344  54 00 0D 7C */	rlwinm r0, r0, 1, 0x15, 0x1e
/* 800FF428 000FB348  7C 03 02 AE */	lhax r0, r3, r0
/* 800FF42C 000FB34C  7C 60 00 D0 */	neg r3, r0
/* 800FF430 000FB350  4E 80 00 20 */	blr
lbl_800FF434:
/* 800FF434 000FB354  54 00 05 BE */	clrlwi r0, r0, 0x16
/* 800FF438 000FB358  20 00 03 FF */	subfic r0, r0, 0x3ff
/* 800FF43C 000FB35C  54 00 08 3C */	slwi r0, r0, 1
/* 800FF440 000FB360  7C 03 02 AE */	lhax r0, r3, r0
/* 800FF444 000FB364  7C 60 00 D0 */	neg r3, r0
/* 800FF448 000FB368  4E 80 00 20 */	blr

.global sndBSearch
sndBSearch:
/* 800FF44C 000FB36C  7C 08 02 A6 */	mflr r0
/* 800FF450 000FB370  2C 05 00 00 */	cmpwi r5, 0
/* 800FF454 000FB374  90 01 00 04 */	stw r0, 4(r1)
/* 800FF458 000FB378  94 21 FF B8 */	stwu r1, -0x48(r1)
/* 800FF45C 000FB37C  BE E1 00 24 */	stmw r23, 0x24(r1)
/* 800FF460 000FB380  3A E3 00 00 */	addi r23, r3, 0
/* 800FF464 000FB384  3B 04 00 00 */	addi r24, r4, 0
/* 800FF468 000FB388  3B 26 00 00 */	addi r25, r6, 0
/* 800FF46C 000FB38C  3B 47 00 00 */	addi r26, r7, 0
/* 800FF470 000FB390  41 82 00 5C */	beq lbl_800FF4CC
/* 800FF474 000FB394  3B C0 00 01 */	li r30, 1
/* 800FF478 000FB398  3B A5 00 00 */	addi r29, r5, 0
lbl_800FF47C:
/* 800FF47C 000FB39C  7C 1E EA 14 */	add r0, r30, r29
/* 800FF480 000FB3A0  7C 1C 0E 70 */	srawi r28, r0, 1
/* 800FF484 000FB3A4  3B FC FF FF */	addi r31, r28, -1
/* 800FF488 000FB3A8  7C 19 F9 D6 */	mullw r0, r25, r31
/* 800FF48C 000FB3AC  39 9A 00 00 */	addi r12, r26, 0
/* 800FF490 000FB3B0  7F 78 02 14 */	add r27, r24, r0
/* 800FF494 000FB3B4  7D 88 03 A6 */	mtlr r12
/* 800FF498 000FB3B8  38 77 00 00 */	addi r3, r23, 0
/* 800FF49C 000FB3BC  38 9B 00 00 */	addi r4, r27, 0
/* 800FF4A0 000FB3C0  4E 80 00 21 */	blrl
/* 800FF4A4 000FB3C4  2C 03 00 00 */	cmpwi r3, 0
/* 800FF4A8 000FB3C8  40 82 00 0C */	bne lbl_800FF4B4
/* 800FF4AC 000FB3CC  7F 63 DB 78 */	mr r3, r27
/* 800FF4B0 000FB3D0  48 00 00 20 */	b lbl_800FF4D0
lbl_800FF4B4:
/* 800FF4B4 000FB3D4  40 80 00 0C */	bge lbl_800FF4C0
/* 800FF4B8 000FB3D8  7F FD FB 78 */	mr r29, r31
/* 800FF4BC 000FB3DC  48 00 00 08 */	b lbl_800FF4C4
lbl_800FF4C0:
/* 800FF4C0 000FB3E0  3B DC 00 01 */	addi r30, r28, 1
lbl_800FF4C4:
/* 800FF4C4 000FB3E4  7C 1E E8 00 */	cmpw r30, r29
/* 800FF4C8 000FB3E8  40 81 FF B4 */	ble lbl_800FF47C
lbl_800FF4CC:
/* 800FF4CC 000FB3EC  38 60 00 00 */	li r3, 0
lbl_800FF4D0:
/* 800FF4D0 000FB3F0  BA E1 00 24 */	lmw r23, 0x24(r1)
/* 800FF4D4 000FB3F4  80 01 00 4C */	lwz r0, 0x4c(r1)
/* 800FF4D8 000FB3F8  38 21 00 48 */	addi r1, r1, 0x48
/* 800FF4DC 000FB3FC  7C 08 03 A6 */	mtlr r0
/* 800FF4E0 000FB400  4E 80 00 20 */	blr

.global sndConvertMs
sndConvertMs:
/* 800FF4E4 000FB404  80 03 00 00 */	lwz r0, 0(r3)
/* 800FF4E8 000FB408  54 00 40 2E */	slwi r0, r0, 8
/* 800FF4EC 000FB40C  90 03 00 00 */	stw r0, 0(r3)
/* 800FF4F0 000FB410  4E 80 00 20 */	blr

.global sndConvertTicks
sndConvertTicks:
/* 800FF4F4 000FB414  7C 08 02 A6 */	mflr r0
/* 800FF4F8 000FB418  90 01 00 04 */	stw r0, 4(r1)
/* 800FF4FC 000FB41C  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 800FF500 000FB420  93 E1 00 14 */	stw r31, 0x14(r1)
/* 800FF504 000FB424  3B E3 00 00 */	addi r31, r3, 0
/* 800FF508 000FB428  38 64 00 00 */	addi r3, r4, 0
/* 800FF50C 000FB42C  4B FE C4 7D */	bl synthGetTicksPerSecond
/* 800FF510 000FB430  80 1F 00 00 */	lwz r0, 0(r31)
/* 800FF514 000FB434  54 00 80 1E */	slwi r0, r0, 0x10
/* 800FF518 000FB438  7C 00 1B 96 */	divwu r0, r0, r3
/* 800FF51C 000FB43C  1C 00 03 E8 */	mulli r0, r0, 0x3e8
/* 800FF520 000FB440  54 00 D9 7E */	srwi r0, r0, 5
/* 800FF524 000FB444  90 1F 00 00 */	stw r0, 0(r31)
/* 800FF528 000FB448  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 800FF52C 000FB44C  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 800FF530 000FB450  38 21 00 18 */	addi r1, r1, 0x18
/* 800FF534 000FB454  7C 08 03 A6 */	mtlr r0
/* 800FF538 000FB458  4E 80 00 20 */	blr

.global sndConvert2Ms
sndConvert2Ms:
/* 800FF53C 000FB45C  54 63 C2 3E */	srwi r3, r3, 8
/* 800FF540 000FB460  4E 80 00 20 */	blr
